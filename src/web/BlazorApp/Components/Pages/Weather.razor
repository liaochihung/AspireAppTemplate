@page "/weather"
@using AspireAppTemplate.Shared
@attribute [StreamRendering(true)]
@attribute [OutputCache(Duration = 5)]
@inject WeatherApiClient WeatherApi

<PageTitle>Weather</PageTitle>

<MudText Typo="Typo.h4" GutterBottom="true">Weather</MudText>
<MudText Typo="Typo.body1" Class="mb-4">This component demonstrates showing data loaded from a backend API service. test</MudText>


        @if (forecasts == null)
        {
            <MudProgressCircular Color="Color.Primary" Indeterminate="true" />
        }
        else
        {
            <MudTable Items="@forecasts" Hover="true" Dense="true" Striped="true" Context="forecast">
                <HeaderContent>
                    <MudTh>Date</MudTh>
                    <MudTh>Temp. (C)</MudTh>
                    <MudTh>Temp. (F)</MudTh>
                    <MudTh>Summary</MudTh>
                </HeaderContent>
                <RowTemplate>
                    <MudTd DataLabel="Date">@forecast.Date.ToShortDateString()</MudTd>
                    <MudTd DataLabel="Temp. (C)">@forecast.TemperatureC</MudTd>
                    <MudTd DataLabel="Temp. (F)">@forecast.TemperatureF</MudTd>
                    <MudTd DataLabel="Summary">@forecast.Summary</MudTd>
                </RowTemplate>
            </MudTable>
        }
   
@code {
    private WeatherForecast[]? forecasts;

    protected override async Task OnInitializedAsync()
    {
        forecasts = await WeatherApi.GetWeatherAsync();
    }
}